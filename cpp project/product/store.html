<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suplement store</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>Buyceps</h1>
            <nav>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Shop</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <main class="container" id="main-content">
        <section id="products">
            <div class="product-grid">
            <div class="product">
                <img src="image/on.jpg" class="product-image">
                <h2>Optimal Nutrition</h2>
                <p>Rs.5500</p>
                <button onclick="buyNow('Optimal Nutrition', 5500)">Buy Now</button>
            </div>
            <div class="product">
                <img src="image/1.jpg">
                <h2>labrada</h2>
                <p>Rs.4500/-</p>
                <button onclick="buyNow('labrada', 4500)">Buy Now</button>
            </div>
             <div class="product">
                <img src="image/2.jpg">
                <h2>Product 2</h2>
                <p>$20</p>
                <button onclick="buyNow('Product 2', 20)">Buy Now</button>
            </div>
             <div class="product">
                <img src="image/3.jpg">
                <h2>Optimal Nutrition Mass Gainer 4kg</h2>
                <p>4500</p>
                <button onclick="buyNow('Optimal Nutrition Mass Gainer 4kg', 4500)">Buy Now</button>
            </div>
             <div class="product">
                <img src="image/4.jpg">
                <h2>Optimal Nutrition 2kg</h2>
                <p>2500</p>
                <button onclick="buyNow('Optimal Nutrition 2kg', 2500)">Buy Now</button>
            </div>
             <div class="product">
                <img src="image/5.jpg">
                <h2>Avvtar Muscle Gainer</h2>
                <p>2399</p>
                <button onclick="buyNow('Avvtar Muscle Gainer', 2399)">Buy Now</button>
            </div>
             <div class="product">
                <img src="image/6.jpg">
                <h2>Dymatize whey protien</h2>
                <p>3500</p>
                <button onclick="buyNow('Dymatize whey protien', 3500)">Buy Now</button>
            </div>
             <div class="product">
                <img src="image/7.jpg">
                <h2>Mega Grow Mass Gainer</h2>
                <p>2500</p>
                <button onclick="buyNow('Mega Grow Mass Gainer', 2500)">Buy Now</button>
            <!-- </div>
            <div class="product">
                <img src="image/9.jpg">
                <h2>MB bioenzyme whey</h2>
                <p>4500</p>
                <button onclick="buyNow('MB bioenzyme whey', 4500)">Buy Now</button>
            </div>
            <div class="product">
                <img src="image/10.jpg">
                <h2>MB whey Gold</h2>
                <p>5500</p>
                <button onclick="buyNow('MB whey Gold', 5500)">Buy Now</button>
            </div> -->

            <!-- Add more product elements as needed -->
        </section>

        <section id="cart" style="display: none;">
            <h2>Shopping Cart</h2>
            <ul id="cart-items">
                <!-- Cart items will be populated here -->
            </ul>
            <p id="total-price"></p> <!-- Total price will be displayed here -->
            <button onclick="proceedToCheckout()">Proceed to Checkout</button>
        </section>
<div class="cart-container">
  <header class="cart-header">
    <h1>Shopping Cart</h1>
    <button onclick="returnToProducts()">Continue Shopping</button>
  </header>
  <main class="cart-main">
    <ul id="cart-items" class="cart-items">
      <!-- Cart items will be populated here -->
    </ul>
    <p class="cart-total" id="total-price"></p> <!-- Total price will be displayed here -->
    <button class="cart-submit" onclick="proceedToCheckout()">Proceed to Checkout</button>
  </main>
  <section id="checkout" class="cart-container" style="display: none;">
    <h2>Checkout</h2>
    <form id="checkout-form" class="cart-form">
      <label for="customer-name">Name:</label>
      <input type="text" id="customer-name" class="cart-input" required>

      <label for="phone-number">Phone Number:</label>
      <input type="tel" id="phone-number" class="cart-input" required>

      <label for="address">Address:</label>
      <input type="text" id="address" class="cart-input" required>

      <label for="payment-method">Payment Method:</label>
      <select id="payment-method" class="cart-input" required>
        <option value="">Select Payment Method</option>
        <option value="cash on delivery">COD</option>
        <option value="Credit Card">Credit Card</option>
        <option value="Debit Card">Debit Card</option>
        <option value="PayPal">PayPal</option>
      </select>

      <button type="button" class="cart-submit" onclick="submitForm()">Place Order</button>
    </form>
    <p id="total-price-checkout" class="cart-total"></p> <!-- Total price will be displayed here -->
  </section>
</div>
    </main>

    <footer>
        <p>&copy; All Rights Reserve by Sanket Nikam</p>
    </footer>

    <script>
        let cart = [];

function buyNow(productName, price) {
    cart.push({ productName, price });
    updateCart();
}

function updateCart() {
    const cartItemsElement = document.getElementById('cart-items');
    cartItemsElement.innerHTML = '';
    let totalPrice = 0; // Initialize total price
    
    cart.forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.productName}: ${item.price}`;
        cartItemsElement.appendChild(li);
        totalPrice += item.price; // Accumulate the price of each item
    });
    
    // Display total price
    const totalPriceElement = document.getElementById('total-price');
    totalPriceElement.textContent = `Total: ${totalPrice.toFixed(2)}`; // Format total price to 2 decimal places
    
    document.getElementById('cart').style.display = 'block';
}

function proceedToCheckout() {
    document.getElementById('products').style.display = 'none';
    document.getElementById('checkout').style.display = 'block';
    document.getElementById('order-confirmation').style.display = 'none'; // Ensure order confirmation is hidden

    // Position the checkout section above the footer
    const checkoutHeight = document.getElementById('checkout').offsetHeight;
    const footerHeight = document.querySelector('footer').offsetHeight;
    const mainContent = document.getElementById('main-content');
    mainContent.style.marginBottom = `${checkoutHeight + footerHeight}px`;

    // Display total price in the checkout section
    const totalPriceCheckout = document.getElementById('total-price-checkout');
    totalPriceCheckout.textContent = document.getElementById('total-price').textContent;
}

function returnToProducts() {
    document.getElementById('products').style.display = 'block';
    document.getElementById('checkout').style.display = 'none';

    // Revert adjustments made during checkout
    const mainContent = document.getElementById('main-content');
    mainContent.style.marginBottom = '0';
}




document.getElementById('checkout-form').addEventListener('submit', function(event) {
    event.preventDefault();

    const customerName = document.getElementById('customer-name').value;
    const phoneNumber = document.getElementById('phone-number').value;
    const address = document.getElementById('address').value;
    const paymentMethod = document.getElementById('payment-method').value;

    if (customerName.trim() === '' || phoneNumber.trim() === '' || address.trim() === '' || paymentMethod.trim() === '') {
        alert('Please fill in all the fields.');
        return;
    }

    // You can perform further processing here, like sending the data to a server, etc.
    alert(`Thank you, ${customerName}, for your order!`);
    document.getElementById('checkout').style.display = 'none';
    document.getElementById('order-confirmation').style.display = 'block';
});

function submitForm() {
        const customerName = document.getElementById('customer-name').value;
        const phoneNumber = document.getElementById('phone-number').value;
        const address = document.getElementById('address').value;
        const paymentMethod = document.getElementById('payment-method').value;

        const formData = {
            customer_name: customerName,
            phone_number: phoneNumber,
            address: address,
            payment_method: paymentMethod
        };

        fetch('http://localhost:5000/submit-form', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
        })
        .then(response => {
            if (response.ok) {
                return response.json();
            }
            throw new Error('Form submission failed.');
        })
        .then(data => {
            alert(data.message);
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred. Please try again later.');
        });
    }

    </script>
</body>
</html>
